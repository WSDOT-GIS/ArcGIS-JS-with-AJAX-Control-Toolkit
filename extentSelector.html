<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<link rel="stylesheet" href="//serverapi.arcgisonline.com/jsapi/arcgis/3.5compact/js/esri/css/esri.css" />
	<script>
		var dojoConfig = {
			async: true,
			packages: [
				{
					name: "wsdot",
					location: location.pathname.replace(/\/[^\/]+$/, "") + "/Scripts/wsdot"
				}
			]
		};
	</script>
	<script src="//serverapi.arcgisonline.com/jsapi/arcgis/3.5compact/"></script>
	<style>
	 html, body, #map {
		 padding: 0;
		 margin: 0;
		 width: 100%;
		 height: 100%;
	 }
	.map-toolbar {
		z-index: 30;
		position: absolute;
		right: 1em;
		top: 1em;
	}
	</style>
</head>
<body>
	<div id="map"></div>
	<script>
		require(["wsdot/extentSelector", "dojo/on"], function (extentSelector, on) {
			"use strict";
			var extentSelector;

			extentSelector = new extentSelector("map");

			if (window.frameElement) {
				on(extentSelector, "extent-change", function (e) {
					var event, frame;
					frame = window.frameElement;
					if (window.CustomEvent) {
						event = new CustomEvent("extentchange", { detail: e });
						frame.dispatchEvent(event);
					} else if (document.createEvent) {
						event = document.createEvent("Event");
						event.detail = e;
						frame.dispatchEvent(event);
					} else if (document.createEventObject) {
						event = document.createEventObject();
						event.detail = e;
						// FIXME: IE 8: Microsoft JScript runtime error: Object doesn't support this property or method
						frame.fireEvent("onextentchange", event);
					}

				});
			}
		});
	</script>
</body>
</html>
