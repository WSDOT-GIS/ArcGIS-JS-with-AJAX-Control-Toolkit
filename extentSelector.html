<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<link rel="stylesheet" href="//serverapi.arcgisonline.com/jsapi/arcgis/3.5compact/js/esri/css/esri.css" />
	<script>
		var dojoConfig = {
			async: true,
			packages: [
				{
					name: "wsdot",
					location: location.pathname.replace(/\/[^\/]+$/, "") + "/Scripts/wsdot"
				}
			]
		};
	</script>
	<script src="//serverapi.arcgisonline.com/jsapi/arcgis/3.5compact/"></script>
	<style>
	 html, body, #map {
		 padding: 0;
		 margin: 0;
		 width: 100%;
		 height: 100%;
	 }
	.map-toolbar {
		z-index: 30;
		position: absolute;
		right: 1em;
		top: 1em;
	}
	</style>
</head>
<body>
	<div id="map"></div>
	<script>
		require(["wsdot/extentSelector", "dojo/on"], function (extentSelector, on) {
			"use strict";
			var extentSelector;

			extentSelector = new extentSelector("map");

			if (window.frameElement) {
				on(extentSelector, "extent-change", function (e) {
					var evt, frame;
					frame = window.frameElement;

					// Although the CustomEvent constructor is not "undefined" in IE 10, calling it will cause an exception.
					// evt = new CustomEvent("extentchange", { detail: e });
					evt = document.createEvent("CustomEvent");
					evt.initCustomEvent("extentchange", true, true, e);
					if (frame.dispatchEvent) {
						frame.dispatchEvent(evt);
					} else if (frame.fireEvent) {
						frame.fireEvent("extentchange", evt);
					}

				});
			}
		});
	</script>
</body>
</html>
